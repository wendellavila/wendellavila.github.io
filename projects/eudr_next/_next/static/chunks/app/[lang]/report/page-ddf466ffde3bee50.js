(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{397:function(e,t,s){Promise.resolve().then(s.bind(s,12612)),Promise.resolve().then(s.bind(s,55216)),Promise.resolve().then(s.bind(s,49716))},55216:function(e,t,s){"use strict";s.d(t,{ClientReportPage:function(){return eP}});var a=s(57437),r=s(2265),n=s(16463),l=s(78659),o=s(89229),i=s(36939),c=s(18087),d=s(32804),x=s(70270),u=s(19047),p=s(60335),m=s(58433),h=s(80511),f=s(30487),b=s(69129),j=s(70773),g=s(99065),y=s(63807),N=s(99926),v=s(49716),w=s(7824);let k=(0,r.createContext)(void 0);function Z(e){let{children:t}=e,s=function(e){let t=(0,n.useSearchParams)(),[s,a]=(0,r.useState)(void 0),l=t.get("oid");return(0,r.useEffect)(()=>{l&&(e?a(w.lT[l]):a(null))},[e,a,l]),s}((0,v.L)());return(0,a.jsx)(k.Provider,{value:s,children:t})}let P=()=>(0,r.useContext)(k);var I=s(90659),C=s(91651),L=s(61438),R=s.n(L),O=s(73244);let T={vertical:"middle",horizontal:"left",wrapText:!0,shrinkToFit:!1,indent:0,readingOrder:"ltr",textRotation:0},F={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},E={bold:!0,color:{argb:"FFFFFFFF"}},S={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F6525"}},B={type:"pattern",pattern:"solid",fgColor:{argb:"FF76933C"}},D={color:{argb:"FFDC2626"}},A={color:{argb:"FF16A34A"}},_={type:"pattern",pattern:"solid",fgColor:{argb:"FFF9F4F1"}},H={type:"pattern",pattern:"solid",fgColor:{argb:"FFF2E6DE"}};var M=s(1633);function U(e,t,s){let a=document.createElement("a");a.href=e,a.download="".concat(t,".").concat(s),a.click(),a.remove()}function G(e,t){let s=new Date(null!=t?t:"");isNaN(s.getDate())&&(s=new Date);let a=s.getFullYear()+(0,g.Bu)(s.getMonth()+1)+(0,g.Bu)(s.getDate())+"_"+(0,g.Bu)(s.getHours())+(0,g.Bu)(s.getMinutes())+(0,g.Bu)(s.getSeconds()),r="";return"suppliers"in e?r="".concat(encodeURI(e.orderNumber.replace("/","-")),"_"):"coordinates"in e&&(r="".concat(encodeURI(e.farmId),"_")),"".concat(r).concat(a)}async function J(e,t,s){let a=G(e,t),r=new(R()).Workbook;!function e(t){let s;let{data:a,workbook:r,i18n:n,lang:l,index:o}=t;if("suppliers"in a){let t=[n("geolocationPanel.farmId"),n("reportsPanel.status"),n("geolocationPanel.city"),n("geolocationPanel.state"),n("geolocationPanel.area"),n("geolocationPanel.coordinates"),"WKT"];(s=r.addWorksheet(encodeURI(a.orderNumber.replace("/","-")).slice(0,31))).columns=[{key:"farmId",header:t[0],width:50},{key:"status",header:t[1],width:15},{key:"city",header:t[2],width:35},{key:"state",header:t[3],width:8},{key:"area",header:t[4],width:15},{key:"coordinates",header:t[5],width:250},{key:"wkt",header:t[6],width:250}],s.duplicateRow(1,2,!0),s.getRow(1).values=["".concat(M.ub,"  -  ").concat(n("navbar.title"))],s.getRow(2).values=["".concat(n("orderDetails.orderNumber"),":  ").concat(a.orderNumber,"        ")+"".concat(n("orderDetails.date"),":  ").concat((0,g.p6)(a.orderDate),"       ")+"".concat(n("orderDetails.volume"),": ").concat(a.volume,"        ")+"".concat(n("orderDetails.supplierNumber"),": ").concat(a.suppliers.length)],s.mergeCells(1,1,1,7),s.mergeCells(2,1,2,7),a.suppliers.forEach((t,a)=>{var o;let i=n("reportsPanel.".concat("HIGH"===(0,g.BX)(t)?"statusLocked":"statusUnlocked"));s.addRow({farmId:t.farmId,status:i,city:t.city,state:t.state,area:+t.area,coordinates:JSON.stringify(t.coordinates),wkt:(o=t.coordinates,"POLYGON((".concat(o.map(e=>"".concat(e[0]," ").concat(e[1])).join(", "),"))"))}),e({data:t,workbook:r,i18n:n,index:a+1,lang:l})})}else"coordinates"in a&&((s=r.addWorksheet(encodeURI("".concat(o?o+"-":"").concat(a.farmId)).slice(0,31))).columns=[{key:"id",header:n("reportsPanel.id"),width:40},{key:"status",header:n("reportsPanel.status"),width:15},{key:"name",header:n("reportsPanel.name"),width:50},{key:"institution",header:n("reportsPanel.institution"),width:50},{key:"details",header:n("reportsPanel.details"),width:90}],s.duplicateRow(1,2,!0),s.getRow(1).values=["".concat(M.ub,"  -  ").concat(n("navbar.title"))],s.getRow(2).values=["".concat(n("geolocationPanel.farmId"),":  ").concat(a.farmId)],s.mergeCells(1,1,1,5),s.mergeCells(2,1,2,5),a.protocol.forEach(e=>{var a;let r="HIGH"===e.status;s.addRow({id:e.type,status:n("reportsPanel.".concat(r?"statusLocked":"statusUnlocked")),name:n("reportsPanel.protocolItems.".concat(e.type,".name")),institution:n("reportsPanel.protocolItems.".concat(e.type,".institution")),details:(null!==(a=t.lang)&&void 0!==a?a:O.E.defaultLocale)==="pt"?e.details:n("reportsPanel.protocolItems.".concat(e.type,".").concat(r?"lockedDetails":"unlockedDetails"))+(r?' Original Details: "'.concat(e.details,'"'):"")})}));s&&function(e,t){e.eachRow({includeEmpty:!1},(e,s)=>{e.eachCell({includeEmpty:!1},(t,a)=>{t.border=F,t.alignment=T,s<=3?(e.height=25,t.font=E,s<=2?t.fill=S:3===s&&(t.fill=B)):s%2==0?t.fill=H:t.fill=_});let a=e.getCell("status");a.value===t("reportsPanel.statusUnlocked")&&(a.font=A),a.value===t("reportsPanel.statusLocked")&&(a.font=D)})}(s,t.i18n)}({data:e,workbook:r,i18n:await (0,g.FC)(s,"reportPage.labels"),lang:s}),r.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/octet-stream"});U(URL.createObjectURL(t),a,"xlsx")})}function W(e){if("suppliers"in e){let t={type:"",features:[]};t.type="FeatureCollection";let s=[];return e.suppliers.forEach(e=>{t.features.push(W(e)),s=s.concat(e.coordinates)}),t.bbox=X(s),t}return"coordinates"in e?{type:"Feature",geometry:{type:"Polygon",coordinates:[e.coordinates]},bbox:X(e.coordinates),properties:{farmId:e.farmId,city:e.city,state:e.state,area:e.area}}:{type:"FeatureCollection",features:[]}}function X(e){let t=e.map(e=>e[0]),s=e.map(e=>e[1]);return[Math.min(...t),Math.min(...s),Math.max(...t),Math.max(...s)]}var Y=s(3812),z=s.n(Y);function K(e){let t=(0,n.useParams)().lang,{data:r,mapRef:l,formats:o,title:i,selectedExportOption:c,setSelectedExportOption:d}=e,x=e.isoDate;"suppliers"in r&&(x=r.timestamp);let u=async e=>{if(d(null),"excel"===e)J(r,x,t);else if("geojson"===e)!function(e,t){let s=G(e,t),a=W(e);U("data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify(a))),s,"json")}(r,x);else if("kml"===e)!function(e,t){let s=G(e,t),a=W(e),r=z()(a);r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"	",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",a="",r="",n=e.slice(1,-1).split(/>\s*</);"?"==n[0][0]&&(a+="<"+n.shift()+">"+s);for(let e=0;e<n.length;e++){let l=n[e];"/"==l[0]&&(r=r.slice(t.length)),a+=r+"<"+l+">"+s,"/"!=l[0]&&"/"!=l[l.length-1]&&-1==l.indexOf("</")&&(r+=t)}return a}(r),U(r="data:application/xml;chatset=utf-8,".concat(r),s,"kml")}(r,x);else if("jpg"===e&&"coordinates"in r&&l&&l.current){let{exportComponentAsJPEG:e}=await s.e(750).then(s.t.bind(s,33336,23));e(l,{fileName:r.farmId})}};return(0,a.jsx)(I.Z,{anchorEl:c,open:null!==c,onClose:u,MenuListProps:{sx:{p:0}},children:(0,a.jsxs)("div",{className:"flex flex-col items-center pb-2 min-w-[175px] ".concat(i?"":"pt-2"),children:[i&&(0,a.jsx)(h.Z,{variant:"body2",className:"px-4 pt-2 pb-1 font-bold text-center max-w-[200px]",children:i}),(!o||!0===o.excel)&&(0,a.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("excel"),children:[(0,a.jsx)(b.I,{icon:"uiw:file-excel",className:"mr-3"}),"Excel"]}),(!o||!0===o.geoJson)&&(0,a.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("geojson"),children:[(0,a.jsx)(b.I,{icon:"mdi:json",className:"mr-3"}),"GeoJSON"]}),(!o||!0===o.kml)&&(0,a.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("kml"),children:[(0,a.jsx)(b.I,{icon:"mdi:xml",className:"mr-3"}),"KML"]}),(!o||!0===o.jpg)&&l&&l.current&&(0,a.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("jpg"),children:[(0,a.jsx)(b.I,{icon:"mdi:image-outline",className:"mr-3"}),"JPG"]})]})})}var q=s(75268),V=s(93430),$=s(97183),Q=s(76548);function ee(e){let{value:t,index:s,children:r}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:t!==s,id:"supplier-info-tabpanel-".concat(s),"aria-labelledby":"supplier-info-tab-".concat(s),children:t===s&&r})}function et(e){let t=(0,c.useTranslations)("reportPage.labels.reportsPanel"),s=(0,n.useParams)().lang,r=(0,d.Z)(j.r.breakpoints.down("md")),{id:l,lastUpdate:o,protocolData:i}=e;return(0,a.jsxs)("section",{id:l,children:[!r&&(0,a.jsxs)(N.Y,{children:[(0,a.jsx)(m.ZP,{item:!0,xs:1,lg:1,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("status")})}),(0,a.jsx)(m.ZP,{item:!0,xs:2,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("name")})}),(0,a.jsx)(m.ZP,{item:!0,xs:2,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("institution")})}),(0,a.jsx)(m.ZP,{item:!0,xs:6,lg:7,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("details")})})]}),i.map(e=>(0,a.jsx)(q.w,{component:"article",children:(0,a.jsxs)(m.ZP,{container:!0,rowSpacing:2,children:[(0,a.jsxs)(m.ZP,{item:!0,xs:3,sm:2,md:1,order:{xs:3,md:1},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[r&&(0,a.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("status")}),(0,a.jsx)(u.Z,{title:t("NO_ALERT"===e.status?"statusUnlocked":"statusLocked"),children:(0,a.jsx)("span",{children:(0,a.jsx)(b.I,{icon:"NO_ALERT"===e.status?"ph:seal-check-fill":"ph:seal-warning-fill",className:"NO_ALERT"===e.status?"text-emerald-600":"text-red-600",width:22,"aria-label":t("NO_ALERT"===e.status?"statusUnlocked":"statusLocked")})})})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:5,md:2,order:{xs:1,md:2},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[r&&(0,a.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("name")}),(0,a.jsx)(h.Z,{variant:"body2",className:"break-words hyphens-auto",children:t("protocolItems.".concat(e.type,".name"))})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:4,sm:5,md:2,order:{xs:2,md:3},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[r&&(0,a.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("institution")}),(0,a.jsx)(h.Z,{variant:"body2",className:"break-words hyphens-auto",children:t("protocolItems.".concat(e.type,".institution"))})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:6,lg:7,order:{xs:4,md:4},className:"px-4 md:px-2 pb-2 md:pb-0 flex flex-col md:justify-center",children:[r&&(0,a.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("details")}),(0,a.jsx)(h.Z,{variant:"body2",children:"pt"===s?e.details:t("protocolItems.".concat(e.type,".").concat("NO_ALERT"===e.status?"unlockedDetails":"lockedDetails"))+"".concat("NO_ALERT"!==e.status?'\nOriginal Details: "'.concat(e.details,'"'):"")})]})]})},e.type)),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between py-3 px-4",children:[(0,a.jsxs)(h.Z,{variant:"body2",className:"mr-2",children:[t("lastUpdate"),":"]}),(0,a.jsxs)("span",{className:"flex flex-row items-center",children:[(0,a.jsx)(b.I,{icon:"mdi:clock-outline",className:"mr-[3px] mb-[1px]",width:15}),(0,a.jsx)(h.Z,{variant:"body2",children:function(e){let t=new Date(e);if(isNaN(t.getDate()))return"";let s=(0,g.Bu)(t.getDate()),a=(0,g.Bu)(t.getMonth()+1),r=t.getFullYear(),n=(0,g.Bu)(t.getHours()),l=(0,g.Bu)(t.getMinutes()),o=(0,g.Bu)(t.getSeconds());return"".concat(s,"/").concat(a,"/").concat(r," ").concat(n,":").concat(l,":").concat(o)}(o)})]})]})]})}var es=s(57112),ea=s(77744),er=s(42175),en=s.n(er),el=s(64429),eo=s.n(el);function ei(e){let t=(0,c.useTranslations)("reportPage.labels.geolocationPanel"),{area:s,center:n,city:l,farmId:o,state:i}=e,[d,x]=(0,r.useState)(!1);return(0,a.jsx)(ea.Jx,{clickable:!0,position:n,title:t("title"),onClick:()=>{x(!0)},children:d&&(0,a.jsx)(ea.nx,{position:n,onCloseClick:()=>{x(!1)},children:(0,a.jsxs)("article",{className:"py-2 px-1 ".concat(en().className," animate-fade-up animate-duration-200"),children:[(0,a.jsxs)("div",{className:"mb-1 break-words",children:[(0,a.jsxs)("span",{className:"font-bold",children:[t("farmId"),": "]}),o]}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("span",{className:"font-bold",children:[t("city"),": "]}),(0,a.jsx)("span",{children:l})]}),(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)("span",{className:"font-bold",children:[t("state"),": "]}),i]}),(0,a.jsxs)("div",{className:"text-blue",children:[(0,a.jsxs)("span",{className:"font-bold",children:[t("area"),": "]}),s]}),(0,a.jsxs)("div",{className:"mt-2 text-blue-600 flex flex-row items-center",children:[(0,a.jsx)(b.I,{icon:"mdi:map",width:15,className:"mr-1"}),(0,a.jsx)("a",{target:"_blank",className:eo().className,href:"https://google.com/maps/place/".concat(n.lat,",").concat(n.lng),children:t("viewOnMaps")})]})]})})})}var ec=s(4984);function ed(e){return"number"==typeof e[0]?{lat:e[1],lng:e[0]}:e.map(e=>({lat:e[1],lng:e[0]}))}function ex(e){let t=Math.floor(e.length/2);return e.sort((e,t)=>e-t),e[t]}function eu(e){let{coordinates:t,mapRef:s}=e,r=(0,c.useTranslations)("reportPage.labels.geolocationPanel");if(0===t.length)return(0,a.jsx)(ec.A,{type:"error",children:r("geolocationNotFound")});let n=ed(t),l=ed(function(e){let t=e.map(e=>e[0]),s=e.map(e=>e[1]);return[ex(t),ex(s)]}(t));return(0,a.jsx)("div",{ref:s,className:"bg-gray-200 animate-fade rounded",children:(0,a.jsx)(es.SV,{fallback:(0,a.jsx)("div",{className:"overflow-auto py-8 min-h-[700px] flex flex-col justify-center",children:(0,a.jsx)(ec.A,{type:"error",className:"!mt-0",textClassName:"text-lg",iconSize:20,children:r("mapUnavailable")})}),children:(0,a.jsx)(ea.b6,{id:"map",mapContainerStyle:{width:"100%",minHeight:"70vmin"},center:l,onCenterChanged:()=>{},zoom:16,mapTypeId:"hybrid",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.mg,{path:n,options:{fillColor:"gray",strokeColor:"white",strokeWeight:1}}),(0,a.jsx)(ei,{center:l,...e})]})})})})}function ep(e){let t=(0,c.useTranslations)("reportPage.labels.geolocationPanel"),{id:s,farmId:r,city:n,state:l,area:o}=e;return(0,a.jsxs)(x.Z,{component:"section",id:s,children:[(0,a.jsxs)(m.ZP,{container:!0,component:"article",children:[(0,a.jsxs)(m.ZP,{item:!0,xs:8,md:5,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("farmId")}),(0,a.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3 break-all pr-3",children:r})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:4,md:2,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("area")}),(0,a.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:o})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:8,md:3,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("city")}),(0,a.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:n})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:4,md:2,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("state")}),(0,a.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:l})]})]}),(0,a.jsx)(eu,{...e})]})}function em(e){let[t,s]=(0,r.useState)(0),n=(0,c.useTranslations)("reportPage.labels.suppliersList"),{supplierData:l,mapRef:o}=e,[i,d]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),m=(0,r.useMemo)(()=>(0,a.jsx)(et,{id:"report-".concat(encodeURI(l.farmId+l.supplierName)),lastUpdate:l.lastUpdate,protocolData:l.protocol}),[l.farmId,l.supplierName,l.lastUpdate,l.protocol]),h=(0,r.useMemo)(()=>(0,a.jsx)(ep,{id:"geolocation-".concat(encodeURI(l.farmId+l.supplierName)),farmId:l.farmId,city:l.city,state:l.state,area:l.area,coordinates:l.coordinates,mapRef:o}),[l.farmId,l.supplierName,l.city,l.state,l.area,l.coordinates,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.Z,{children:[(0,a.jsxs)(V.Z,{component:"nav",value:t,onChange:(e,t)=>s(t),variant:"fullWidth",sx:{".MuiTabs-scroller":{height:42}},children:[(0,a.jsx)($.Z,{label:(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(b.I,{icon:"mingcute:leaf-fill",width:18,className:"pr-1"}),n("deforestationReports")]}),className:"py-0"}),(0,a.jsx)($.Z,{label:(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(b.I,{icon:"ph:map-pin-fill",width:18,className:"pr-1"}),n("geolocation")]}),className:"py-0 min-h-0"})]}),(0,a.jsx)(ee,{index:0,value:t,children:m}),(0,a.jsx)(ee,{index:1,value:t,children:h})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-end mt-4 gap-3",children:[(0,a.jsxs)(Q.Z,{variant:"contained",color:"buttonWhite",onClick:e=>{d(e.currentTarget)},children:[(0,a.jsx)(b.I,{icon:"mdi:download",width:18,className:"mr-2"}),n("exportReports")]}),(0,a.jsx)(K,{data:l,formats:{excel:!0,geoJson:!1,kml:!1,jpg:!1},selectedExportOption:i,setSelectedExportOption:d}),(0,a.jsxs)(Q.Z,{variant:"contained",color:"buttonWhite",onClick:e=>{p(e.currentTarget)},children:[(0,a.jsx)(b.I,{icon:"mdi:download",width:18,className:"mr-2"}),n("exportCoordinates")]}),(0,a.jsx)(K,{data:l,formats:{excel:!1,geoJson:!0,kml:!0,jpg:!0},mapRef:o,selectedExportOption:u,setSelectedExportOption:p})]})]})}function eh(e){let t=e.supplierData,[s,n]=(0,r.useState)(!1),l=(0,c.useTranslations)("reportPage.labels"),o=(0,g.BX)(t),i=(0,r.useRef)(null);return(0,a.jsx)(q.w,{component:"article",panel:(0,a.jsx)(em,{supplierData:t,mapRef:i}),isOpen:s,setPanelState:n,children:(0,a.jsxs)(m.ZP,{container:!0,children:[(0,a.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(u.Z,{title:l("suppliersList.".concat("NO_ALERT"===o?"statusUnlocked":"statusLocked")),children:(0,a.jsx)("span",{children:(0,a.jsx)(b.I,{icon:"NO_ALERT"===o?"ph:seal-check-fill":"ph:seal-warning-fill",className:"NO_ALERT"===o?"text-emerald-600":"text-red-600",width:22,"aria-label":l("suppliersList.".concat("NO_ALERT"===o?"statusUnlocked":"statusLocked"))})})})}),(0,a.jsx)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",children:t.supplierName})}),(0,a.jsx)(m.ZP,{item:!0,xs:5,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"break-words",children:t.farmId})}),(0,a.jsx)(m.ZP,{item:!0,xs:1,className:"px-2 flex flex-col justify-center items-end",children:(0,a.jsx)(b.I,{icon:"mdi:chevron-down",width:30,className:"text-neutral-600 ".concat(s?"rotate-180":"rotate-0")})})]})},"".concat(t.supplierName,"-").concat(t.farmId))}function ef(){let e=(0,c.useTranslations)("reportPage.labels"),t=(0,d.Z)(j.r.breakpoints.down("lg")),s=P(),[n,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=(t,s)=>"HIGH"===t.status&&"HIGH"!==s.status?-1:"HIGH"===s.status&&"HIGH"!==t.status?1:t.status===s.status?e("reportsPanel.protocolItems.".concat(t.type,".name")).localeCompare(e("reportsPanel.protocolItems.".concat(s.type,".name"))):0;s&&(s.suppliers.forEach(e=>e.protocol.sort(t)),s.suppliers.sort((e,t)=>"HIGH"===(0,g.BX)(e)&&"HIGH"!==(0,g.BX)(t)?-1:"HIGH"===(0,g.BX)(t)&&"HIGH"!==(0,g.BX)(e)?1:(0,g.BX)(e)===(0,g.BX)(t)?e.supplierName.localeCompare(t.supplierName):0))},[s,e]),(0,a.jsx)("section",{id:"suppliers-list",className:"p-4 flex flex-col items-center",children:(0,a.jsxs)(x.Z,{className:"max-w-[1200px] w-full animate-fade-up animate-duration-700",children:[(0,a.jsx)(y.O,{icon:(0,a.jsx)(b.I,{icon:"ic:round-agriculture",width:31,className:"mr-3"}),title:e("suppliersList.title"),actions:s&&(0,a.jsx)(u.Z,{title:e("suppliersList.exportAllSuppliers"),children:(0,a.jsx)(p.Z,{onClick:e=>{l(e.currentTarget)},className:"px-0 py-1",children:(0,a.jsx)(b.I,{icon:"mdi:download",className:"text-white"})})})}),s&&(0,a.jsx)(K,{title:e("suppliersList.exportAllSuppliers"),data:s,selectedExportOption:n,setSelectedExportOption:l,formats:{excel:!0,geoJson:!0,kml:!0,jpg:!1}}),(0,a.jsxs)(N.Y,{children:[(0,a.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.status")})}),(0,a.jsx)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.supplierName")})}),(0,a.jsx)(m.ZP,{item:!0,xs:5,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.farmId")})})]}),s&&s.suppliers.length>0&&s.suppliers.map(e=>(0,a.jsx)(eh,{supplierData:e},"".concat(e.supplierName,"-").concat(e.farmId))),void 0===s&&(0,a.jsx)("article",{id:"suppliers-loading",className:"py-2",children:(0,a.jsxs)(m.ZP,{container:!0,children:[(0,a.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,a.jsx)(f.Z,{width:25})}),(0,a.jsxs)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:[(0,a.jsx)(f.Z,{width:t?"90%":"80%"}),(0,a.jsx)(f.Z,{width:"60%"})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:6,className:"px-2 flex flex-col justify-center",children:[(0,a.jsx)(f.Z,{width:t?"60%":"50%"}),(0,a.jsx)(f.Z,{width:t?"90%":"70%"})]})]})}),null===s&&(0,a.jsx)(ec.A,{id:"suppliers-error",type:"error",children:e("suppliersList.noSuppliersError")})]})})}var eb=s(75462);function ej(e){let{id:t,children:s,width:r,height:n}=e;return(0,a.jsx)("div",{id:t,className:"pl-2 py-3",children:s||(0,a.jsx)(f.Z,{width:null!=r?r:80,height:null!=n?n:20})})}function eg(){let e=(0,c.useTranslations)("reportPage.labels.orderDetails"),t=P(),s=t&&t.suppliers.filter(e=>e.protocol.filter(e=>"NO_ALERT"!==e.status).length>0).length>0?"HIGH":"NO_ALERT",r=t&&void 0!==t.customerName,n=t&&void 0!==t.countryCode?t.countryCode:"";return(0,a.jsx)("section",{id:"order-details",className:"p-4 flex flex-col items-center",children:(0,a.jsxs)(x.Z,{className:"max-w-[1200px] w-full animate-fade-up animate-duration-[800ms]",children:[(0,a.jsx)(y.O,{title:e("title"),icon:(0,a.jsx)(b.I,{icon:"material-symbols:order-approve",width:28,className:"mr-3"})}),(t||void 0===t)&&(0,a.jsxs)(m.ZP,{container:!0,children:[(0,a.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("orderNumber")}),(0,a.jsx)(ej,{width:100,children:t?(0,a.jsx)(h.Z,{variant:"body2",children:t.orderNumber}):void 0})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("date")}),(0,a.jsx)(ej,{width:80,children:t?(0,a.jsx)(h.Z,{variant:"body2",children:(0,g.p6)(t.orderDate)}):void 0})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:2,md:2,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("volume")}),(0,a.jsx)(ej,{width:70,children:t?(0,a.jsx)(h.Z,{variant:"body2",children:t.volume}):void 0})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 xs:border-t-[1px] md:border-t-0",children:e("supplierNumber")}),(0,a.jsx)(ej,{width:50,children:t?(0,a.jsx)(h.Z,{variant:"body2",children:t.suppliers.length}):void 0})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:r?5:7,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 xs:border-t-[1px] md:border-t-0",children:e("status")}),(0,a.jsx)(ej,{width:25,children:t?(0,a.jsx)(u.Z,{title:e("NO_ALERT"===s?"statusUnlocked":"statusLocked"),"aria-label":e("NO_ALERT"===s?"statusUnlocked":"statusLocked"),children:(0,a.jsx)("span",{children:(0,a.jsx)(b.I,{icon:"NO_ALERT"===s?"ph:seal-check-fill":"ph:seal-warning-fill",className:"\n                        ".concat("NO_ALERT"===s?"text-emerald-600":"text-red-600"),width:22})})}):void 0})]}),r&&(0,a.jsxs)(m.ZP,{item:!0,xs:2,md:3,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 border-t-[1px]",children:e("country")}),(0,a.jsx)(ej,{width:100,children:t?""!==n?(0,a.jsx)(eb.Z,{className:" w-6 h-6 border border-solid border-neutral-300 bg-neutral-300",children:(0,a.jsx)(b.I,{icon:"circle-flags:".concat(n),width:25})}):(0,a.jsx)(eb.Z,{className:" w-6 h-6 border border-solid border-neutral-400 bg-transparent text-neutral-400",children:(0,a.jsx)(b.I,{icon:"mdi:question-mark",width:22})}):void 0})]}),r&&(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:9,children:[(0,a.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 border-t-[1px]",children:e("customerName")}),(0,a.jsx)(ej,{width:100,children:t?(0,a.jsx)(h.Z,{variant:"body2",children:t.customerName}):void 0})]})]}),null===t&&(0,a.jsx)(ec.A,{id:"report-error",type:"error",children:e("noOrderDetailsError")})]})})}var ey=s(86504);function eN(e){let t=(0,n.useRouter)(),s=(0,n.useParams)().lang,r=(0,c.useTranslations)("reportPage.labels.navbar"),{titleAppend:l,className:o}=e;return(0,a.jsx)(ey.w,{className:o,titleAppend:l,i18n:r,onBackButton:()=>t.replace("/".concat(s,"/orders"))})}var ev=s(37988),ew=s(89657);function ek(e){let{children:t}=e;return(0,ea.Ji)({id:"google-map-script",googleMapsApiKey:"-HBM",version:"3.55",nonce:"mapsloader"}),t}function eZ(){let e=(0,n.useRouter)(),t=(0,n.useParams)().lang,s=(0,ew.T)(),r=P();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN,{className:"flex lg:hidden",titleAppend:r?r.orderNumber:void 0}),(0,a.jsxs)("div",{className:"flex flex-row grow bg-avocado-100",children:[(0,a.jsx)(ev.I,{card:!0,className:"hidden lg:flex h-screen",customerId:s?s.customerId:void 0,customerName:s?s.customerName:void 0,onHomeButton:()=>{s&&"admin"===s.role?e.replace("/".concat(t,"/dashboard")):e.replace("/".concat(t,"/orders"))},logo:s?s.logo:void 0,hideSettings:!0,hideLogout:!0,showOrders:!!s&&"admin"===s.role}),(0,a.jsxs)("main",{className:"flex flex-col grow",children:[(0,a.jsx)(eN,{className:"hidden lg:flex",titleAppend:r?r.orderNumber:void 0}),(0,a.jsx)(i.ZP,{universal:!0,children:(0,a.jsxs)("div",{className:"flex flex-col grow px-4 lg:px-8 justify-between min-h-full",children:[(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)(eg,{}),(0,a.jsx)(ek,{children:(0,a.jsx)(ef,{})})]}),(0,a.jsx)(o.m,{className:"mt-4 mb-2"})]})})]})]})]})}function eP(){let e=(0,n.useSearchParams)().get("oid"),t=(0,v.L)(),[s,o]=(0,r.useState)((0,a.jsx)(l.LoadingScreen,{}));return(0,r.useEffect)(()=>{t&&e&&o((0,a.jsx)(r.Suspense,{children:(0,a.jsx)(ew.i,{children:(0,a.jsx)(Z,{children:(0,a.jsx)(eZ,{})})})}))},[t,e]),s}},63807:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var a=s(57437);function r(e){let{title:t,icon:s,actions:r,className:n}=e;return(0,a.jsxs)("div",{className:"flex flex-row px-4 py-1.5 items-center\n      bg-stone-800 text-gray-50 ".concat(null!=n?n:""),children:[s,(0,a.jsx)("h3",{className:"text-xl m-0 font-medium",children:t}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grow"}),r]})]})}},75268:function(e,t,s){"use strict";s.d(t,{w:function(){return n}});var a=s(57437),r=s(87138);function n(e){let t="component"in e&&e.component?e.component:"div",s="panel"in e,n="href"in e,{id:l,children:o}=e,i="py-2 flex flex-row border-neutral-200 border-b-[1px]\n	border-t-0 border-x-0 border-solid ";return(s||n)&&(i+="hover:cursor-pointer hover:bg-stone-100 "),n&&(i+="text-inherit no-underline"),(0,a.jsxs)(t,{id:l,children:[n&&(0,a.jsx)(r.default,{href:e.href,className:i,children:o}),!n&&(0,a.jsx)("div",{onClick:()=>{s&&e.setPanelState(e=>!e)},className:i,children:o}),s&&!0===e.isOpen&&(0,a.jsx)("div",{className:"p-4 bg-avocado-200",children:e.panel})]})}},99926:function(e,t,s){"use strict";s.d(t,{Y:function(){return n}});var a=s(57437),r=s(58433);function n(e){let{children:t}=e;return(0,a.jsx)(r.ZP,{container:!0,className:"py-1 bg-neutral-100 border-neutral-200 border-b-[1px] border-t-0 border-x-0 border-solid",children:t})}},78659:function(e,t,s){"use strict";s.d(t,{LoadingScreen:function(){return d}});var a=s(57437),r=s(66648),n=s(69129),l=s(73244),o=s(16463),i=s(1633),c=s(18087);function d(e){let t=(0,o.useRouter)(),s=(0,o.useParams)().lang,d=(0,c.useTranslations)("loadingScreen.labels"),{id:x}=e;return(0,a.jsxs)("section",{id:x,className:"bg-white min-h-[100vh] flex flex-col items-center justify-center",children:[(0,a.jsx)(r.default,{width:100,height:65,src:"".concat(i.sb,"/logo.svg"),alt:"Logo",className:"mb-10 w-auto h-[100px]",priority:!0}),(0,a.jsx)(n.I,{icon:"svg-spinners:3-dots-fade",width:40,className:"text-avocado-400"}),(0,a.jsxs)("p",{className:"text-sm absolute bottom-3 animate-fade animate-delay-1000",children:["".concat(d("notRedirected")," "),(0,a.jsx)("a",{href:"".concat(i.X8,"/").concat(s,"/"),className:"underline text-primary",onClick:e=>{e.preventDefault(),t.replace("/".concat(l.E.defaultLocale))},children:d("clickHere")})," ".concat(d("goToFrontPage"))]})]})}},86504:function(e,t,s){"use strict";s.d(t,{w:function(){return d}});var a=s(57437),r=s(66648),n=s(16463),l=s(70270),o=s(60335),i=s(69129),c=s(1633);function d(e){let t=(0,n.useRouter)(),s=e.drawer&&e.setDrawerOpen,{i18n:d,titleAppend:x,onBackButton:u,className:p}=e;return(0,a.jsxs)(l.Z,{component:"header",className:"pr-6 py-3 flex items-center rounded-none\n      justify-between z-10 h-9 text-foreground \n      ".concat(s||u?"pl-4":"pl-8","\n      ").concat(null!=p?p:""),children:[(s||u)&&(0,a.jsx)(o.Z,{className:"mr-3 text-foreground animate-fade animate-duration-500","aria-label":d(s?"menu":"goBack"),onClick:()=>{s&&e.setDrawerOpen?e.setDrawerOpen(e=>!e):u?u():t.back()},children:(0,a.jsx)(i.I,{icon:s?"mdi:menu":"mdi:arrow-back",width:23})}),e.drawer,(0,a.jsx)("div",{className:"text-xl font-medium grow animate-fade animate-duration-500 animate-delay-150",children:(0,a.jsx)("span",{children:d("title")+(x?" - ".concat(x):"")})}),(0,a.jsx)(r.default,{width:66,height:43,src:"".concat(c.sb,"/logo.svg"),alt:"Logo",className:"inline w-auto h-[30px]",priority:!0})]})}},37988:function(e,t,s){"use strict";s.d(t,{I:function(){return m}});var a=s(57437),r=s(66648),n=s(16463),l=s(18087),o=s(57300),i=s(75462),c=s(70270),d=s(69129),x=s(52179),u=s(1633);function p(e){let{logo:t,customerId:s,customerName:c,onHomeButton:p,hideSettings:m,hideLogout:h,showOrders:f}=e,b=(0,l.useTranslations)("ordersPage.labels.drawer"),j=(0,n.useRouter)(),g=(0,n.useParams)().lang,y=[];return p&&y.push((0,a.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:p,children:[(0,a.jsx)(d.I,{icon:"mdi:home-outline",width:22,className:"mr-2"}),b("home")]})),f&&y.push((0,a.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>j.push("/".concat(g,"/orders")),children:[(0,a.jsx)(d.I,{icon:"mingcute:ship-line",width:22,className:"mr-2"}),b("orders")]})),m||y.push((0,a.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>j.push("/".concat(g,"/settings")),children:[(0,a.jsx)(d.I,{icon:"mdi:account-cog-outline",width:22,className:"mr-2"}),b("accountSettings")]})),h||y.push((0,a.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>{localStorage.removeItem("eudr_auth_token"),sessionStorage.removeItem("eudr_auth_token"),j.replace("/".concat(g))},children:[(0,a.jsx)(d.I,{icon:"ic:exit-to-app",width:20,className:"mr-2"}),b("logout")]})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center pt-7 pb-6 justify-center relative bg-primary",children:[(0,a.jsx)(r.default,{src:"".concat(u.sb,"/cafe-grao.jpg"),alt:b("coffeeBeans"),sizes:"350px",className:"object-cover",fill:!0,priority:!0}),(0,a.jsx)("div",{className:"bg-yellow-900/25 w-full h-full absolute top-0 left-0"}),(0,a.jsx)("div",{className:"bg-black/25 w-full h-full absolute top-0 left-0"}),(0,a.jsx)(i.Z,{className:"h-[100px] w-[100px] border-1 border-solid shadow-sm border-white",children:(0,a.jsx)(r.default,{src:null!=t?t:"".concat(u.sb,"/user.webp"),alt:b("customerLogo"),width:100,height:100})}),c&&(0,a.jsx)("span",{className:"text-2xl text-center pt-4 drop-shadow-sm text-white",children:c})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-between grow overflow-x-hidden",children:[(0,a.jsx)("nav",{className:"flex flex-col justify-center mt-4",children:y.map((e,t)=>(0,a.jsx)("div",{className:"animate-duration-300 ".concat(t%2==0?"animate-fade-left":"animate-fade-right"),children:e},"user-profile-item-".concat(t)))}),(0,a.jsx)("div",{className:"px-4 pb-4 flex flex-row justify-center mt-4",children:(0,a.jsx)(x.$,{})})]})]})}function m(e){let{card:t,className:s,...r}=e,n=(0,a.jsx)(p,{...r}),l="w-[320px] h-full flex flex-col py-0 ".concat(null!=s?s:"");return t?(0,a.jsx)(c.Z,{className:"rounded-none ".concat(l),children:n}):(0,a.jsx)("div",{className:l,children:n})}},70773:function(e,t,s){"use strict";s.d(t,{r:function(){return n}});var a=s(42175),r=s.n(a);let n=(0,s(94444).Z)({typography:{fontFamily:r().style.fontFamily},components:{MuiListItemButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiIconButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiMenuItem:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}}},palette:{primary:{main:"#74533b",light:"#74533b",dark:"#74533b",contrastText:"#fff"},secondary:{main:"#e3d5cc",light:"#e3d5cc",dark:"#e3d5cc",contrastText:"#1d1b19"},tertiary:{main:"#A0BF7F",light:"#A0BF7F",dark:"#A0BF7F",contrastText:"#fff"},buttonWhite:{main:"#ffffff",light:"#ffffff",dark:"#ffffff",contrastText:"#1d1b19"},success:{main:"#159847",light:"#159847",dark:"#159847",contrastText:"#159847"},error:{main:"#dc2626",light:"#dc2626",dark:"#dc2626",contrastText:"#dc2626"}}})},89657:function(e,t,s){"use strict";s.d(t,{T:function(){return c},i:function(){return i}});var a=s(57437),r=s(2265),n=s(49716),l=s(7824);let o=(0,r.createContext)(void 0);function i(e){let{children:t}=e,s=function(e){let[t,s]=(0,r.useState)();return(0,r.useEffect)(()=>{e?s(l.u):s(null)},[e,s]),t}((0,n.L)());return(0,a.jsx)(o.Provider,{value:s,children:t})}let c=()=>(0,r.useContext)(o)}},function(e){e.O(0,[839,113,910,816,617,87,37,614,439,487,119,244,61,159,971,23,744],function(){return e(e.s=397)}),_N_E=e.O()}]);