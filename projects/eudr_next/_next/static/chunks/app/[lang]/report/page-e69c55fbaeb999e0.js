(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{397:function(e,t,s){Promise.resolve().then(s.bind(s,12612)),Promise.resolve().then(s.bind(s,41771)),Promise.resolve().then(s.bind(s,49716))},41771:function(e,t,s){"use strict";s.d(t,{ClientReportPage:function(){return eP}});var r=s(57437),a=s(2265),l=s(16463),n=s(78659),o=s(89229),i=s(36939),c=s(18087),d=s(32804),x=s(70270),u=s(19047),p=s(60335),m=s(58433),h=s(80511),f=s(30487),b=s(69129),j=s(70773),g=s(99065),y=s(63807),N=s(99926),w=s(49716),v=s(7824);let k=(0,a.createContext)(void 0);function Z(e){let{children:t}=e,s=function(e){let t=(0,l.useSearchParams)(),[s,r]=(0,a.useState)(void 0),n=t.get("oid");return(0,a.useEffect)(()=>{n&&(e?r(v.lT[n]):r(null))},[e,r,n]),s}((0,w.L)());return(0,r.jsx)(k.Provider,{value:s,children:t})}let P=()=>(0,a.useContext)(k);var I=s(90659),C=s(91651),L=s(3812),R=s.n(L),T=s(61438),O=s.n(T),F=s(73244);let E={vertical:"middle",horizontal:"left",wrapText:!0,shrinkToFit:!1,indent:0,readingOrder:"ltr",textRotation:0},S={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},_={bold:!0,color:{argb:"FFFFFFFF"}},A={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F6525"}},B={type:"pattern",pattern:"solid",fgColor:{argb:"FF76933C"}},D={color:{argb:"FFDC2626"}},H={color:{argb:"FF16A34A"}},M={type:"pattern",pattern:"solid",fgColor:{argb:"FFF9F4F1"}},U={type:"pattern",pattern:"solid",fgColor:{argb:"FFF2E6DE"}};var G=s(1633);function X(e){let t=e.map(e=>e[0]),s=e.map(e=>e[1]);return[Math.min(...t),Math.min(...s),Math.max(...t),Math.max(...s)]}function J(e,t,s){let r=document.createElement("a");r.href=e,r.download="".concat(t,".").concat(s),r.click()}function W(e,t){let s=new Date(null!=t?t:"");isNaN(s.getDate())&&(s=new Date);let r=s.getFullYear()+(0,g.Bu)(s.getMonth()+1)+(0,g.Bu)(s.getDate())+"_"+(0,g.Bu)(s.getHours())+(0,g.Bu)(s.getMinutes())+(0,g.Bu)(s.getSeconds()),a="";return"suppliers"in e?a="".concat(encodeURI(e.orderNumber.replace("/","-")),"_"):"coordinates"in e&&(a="".concat(encodeURI(e.farmId),"_")),"".concat(a).concat(r)}function Y(e){if("suppliers"in e){let t={type:"",features:[]};t.type="FeatureCollection";let s=[];return e.suppliers.forEach(e=>{t.features.push(Y(e)),s=s.concat(e.coordinates)}),t.bbox=X(s),t}return"coordinates"in e?{type:"Feature",geometry:{type:"Polygon",coordinates:[e.coordinates]},bbox:X(e.coordinates),properties:{farmId:e.farmId,city:e.city,state:e.state,area:e.area}}:{type:"FeatureCollection",features:[]}}async function z(e,t,s){let r=W(e,t),a=new(O()).Workbook;!function e(t){let s;let{data:r,workbook:a,i18n:l,lang:n,index:o}=t;if("suppliers"in r){let t=[l("geolocationPanel.farmId"),l("reportsPanel.status"),l("geolocationPanel.city"),l("geolocationPanel.state"),l("geolocationPanel.area"),l("geolocationPanel.coordinates"),"WKT"];(s=a.addWorksheet(encodeURI(r.orderNumber.replace("/","-")).slice(0,31))).columns=[{key:"farmId",header:t[0],width:50},{key:"status",header:t[1],width:15},{key:"city",header:t[2],width:35},{key:"state",header:t[3],width:8},{key:"area",header:t[4],width:15},{key:"coordinates",header:t[5],width:250},{key:"wkt",header:t[6],width:250}],s.duplicateRow(1,2,!0),s.getRow(1).values=["".concat(G.ub,"  -  ").concat(l("navbar.title"))],s.getRow(2).values=["".concat(l("orderDetails.orderNumber"),":  ").concat(r.orderNumber,"        ")+"".concat(l("orderDetails.date"),":  ").concat((0,g.p6)(r.orderDate),"       ")+"".concat(l("orderDetails.volume"),": ").concat(r.volume,"        ")+"".concat(l("orderDetails.supplierNumber"),": ").concat(r.suppliers.length)],s.mergeCells(1,1,1,7),s.mergeCells(2,1,2,7),r.suppliers.forEach((t,r)=>{var o;let i=l("reportsPanel.".concat("HIGH"===(0,g.BX)(t)?"statusLocked":"statusUnlocked"));s.addRow({farmId:t.farmId,status:i,city:t.city,state:t.state,area:+t.area,coordinates:JSON.stringify(t.coordinates),wkt:(o=t.coordinates,"POLYGON((".concat(o.map(e=>"".concat(e[0]," ").concat(e[1])).join(", "),"))"))}),e({data:t,workbook:a,i18n:l,index:r+1,lang:n})})}else"coordinates"in r&&((s=a.addWorksheet(encodeURI("".concat(o?o+"-":"").concat(r.farmId)).slice(0,31))).columns=[{key:"id",header:l("reportsPanel.id"),width:40},{key:"status",header:l("reportsPanel.status"),width:15},{key:"name",header:l("reportsPanel.name"),width:50},{key:"institution",header:l("reportsPanel.institution"),width:50},{key:"details",header:l("reportsPanel.details"),width:90}],s.duplicateRow(1,2,!0),s.getRow(1).values=["".concat(G.ub,"  -  ").concat(l("navbar.title"))],s.getRow(2).values=["".concat(l("geolocationPanel.farmId"),":  ").concat(r.farmId)],s.mergeCells(1,1,1,5),s.mergeCells(2,1,2,5),r.protocol.forEach(e=>{var r;let a="HIGH"===e.status;s.addRow({id:e.type,status:l("reportsPanel.".concat(a?"statusLocked":"statusUnlocked")),name:l("reportsPanel.protocolItems.".concat(e.type,".name")),institution:l("reportsPanel.protocolItems.".concat(e.type,".institution")),details:(null!==(r=t.lang)&&void 0!==r?r:F.E.defaultLocale)==="pt"?e.details:l("reportsPanel.protocolItems.".concat(e.type,".").concat(a?"lockedDetails":"unlockedDetails"))+(a?' Original Details: "'.concat(e.details,'"'):"")})}));s&&function(e,t){e.eachRow({includeEmpty:!1},(e,s)=>{e.eachCell({includeEmpty:!1},(t,r)=>{t.border=S,t.alignment=E,s<=3?(e.height=25,t.font=_,s<=2?t.fill=A:3===s&&(t.fill=B)):s%2==0?t.fill=U:t.fill=M});let r=e.getCell("status");r.value===t("reportsPanel.statusUnlocked")&&(r.font=H),r.value===t("reportsPanel.statusLocked")&&(r.font=D)})}(s,t.i18n)}({data:e,workbook:a,i18n:await (0,g.FC)(s,"reportPage.labels"),lang:s}),a.xlsx.writeBuffer().then(e=>{let t=new Blob([e],{type:"application/octet-stream"});J(URL.createObjectURL(t),r,"xlsx")})}function K(e){let t=(0,l.useParams)().lang,{data:a,mapRef:n,formats:o,title:i,selectedExportOption:c,setSelectedExportOption:d}=e,x=e.isoDate;"suppliers"in a&&(x=a.timestamp);let u=async e=>{if(d(null),"excel"===e)z(a,x,t);else if("geojson"===e)!function(e,t){let s=W(e,t),r=Y(e);J("data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify(r))),s,"json")}(a,x);else if("kml"===e)!function(e,t){let s=W(e,t),r=Y(e),a=R()(r);a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"	",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",a="",l=e.slice(1,-1).split(/>\s*</);"?"==l[0][0]&&(r+="<"+l.shift()+">"+s);for(let e=0;e<l.length;e++){let n=l[e];"/"==n[0]&&(a=a.slice(t.length)),r+=a+"<"+n+">"+s,"/"!=n[0]&&"/"!=n[n.length-1]&&-1==n.indexOf("</")&&(a+=t)}return r}(a),J(a="data:application/xml;chatset=utf-8,".concat(a),s,"kml")}(a,x);else if("jpg"===e&&"coordinates"in a&&n&&n.current){let{exportComponentAsJPEG:e}=await s.e(750).then(s.t.bind(s,33336,23));e(n,{fileName:a.farmId})}};return(0,r.jsx)(I.Z,{anchorEl:c,open:null!==c,onClose:u,MenuListProps:{sx:{p:0}},children:(0,r.jsxs)("div",{className:"flex flex-col items-center pb-2 min-w-[175px] ".concat(i?"":"pt-2"),children:[i&&(0,r.jsx)(h.Z,{variant:"body2",className:"px-4 pt-2 pb-1 font-bold text-center max-w-[200px]",children:i}),(!o||!0===o.excel)&&(0,r.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("excel"),children:[(0,r.jsx)(b.I,{icon:"uiw:file-excel",className:"mr-3"}),"Excel"]}),(!o||!0===o.geoJson)&&(0,r.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("geojson"),children:[(0,r.jsx)(b.I,{icon:"mdi:json",className:"mr-3"}),"GeoJSON"]}),(!o||!0===o.kml)&&(0,r.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("kml"),children:[(0,r.jsx)(b.I,{icon:"mdi:xml",className:"mr-3"}),"KML"]}),(!o||!0===o.jpg)&&n&&n.current&&(0,r.jsxs)(C.Z,{className:"flex flex-row justify-center w-full py-2",onClick:()=>u("jpg"),children:[(0,r.jsx)(b.I,{icon:"mdi:image-outline",className:"mr-3"}),"Image"]})]})})}var q=s(75268),$=s(93430),Q=s(97183),V=s(76548);function ee(e){let{value:t,index:s,children:a}=e;return(0,r.jsx)("div",{role:"tabpanel",hidden:t!==s,id:"supplier-info-tabpanel-".concat(s),"aria-labelledby":"supplier-info-tab-".concat(s),children:t===s&&a})}function et(e){let t=(0,c.useTranslations)("reportPage.labels.reportsPanel"),s=(0,l.useParams)().lang,a=(0,d.Z)(j.r.breakpoints.down("md")),{id:n,lastUpdate:o,protocolData:i}=e;return(0,r.jsxs)("section",{id:n,children:[!a&&(0,r.jsxs)(N.Y,{children:[(0,r.jsx)(m.ZP,{item:!0,xs:1,lg:1,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("status")})}),(0,r.jsx)(m.ZP,{item:!0,xs:2,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("name")})}),(0,r.jsx)(m.ZP,{item:!0,xs:2,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("institution")})}),(0,r.jsx)(m.ZP,{item:!0,xs:6,lg:7,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",component:"span",children:t("details")})})]}),i.map(e=>(0,r.jsx)(q.w,{component:"article",children:(0,r.jsxs)(m.ZP,{container:!0,rowSpacing:2,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:3,sm:2,md:1,order:{xs:3,md:1},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[a&&(0,r.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("status")}),(0,r.jsx)(u.Z,{title:t("NO_ALERT"===e.status?"statusUnlocked":"statusLocked"),children:(0,r.jsx)("span",{children:(0,r.jsx)(b.I,{icon:"NO_ALERT"===e.status?"ph:seal-check-fill":"ph:seal-warning-fill",className:"NO_ALERT"===e.status?"text-emerald-600":"text-red-600",width:22,"aria-label":t("NO_ALERT"===e.status?"statusUnlocked":"statusLocked")})})})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:5,md:2,order:{xs:1,md:2},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[a&&(0,r.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("name")}),(0,r.jsx)(h.Z,{variant:"body2",className:"break-words hyphens-auto",children:t("protocolItems.".concat(e.type,".name"))})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:4,sm:5,md:2,order:{xs:2,md:3},className:"px-4 md:px-2 flex flex-col md:justify-center",children:[a&&(0,r.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("institution")}),(0,r.jsx)(h.Z,{variant:"body2",className:"break-words hyphens-auto",children:t("protocolItems.".concat(e.type,".institution"))})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:12,md:6,lg:7,order:{xs:4,md:4},className:"px-4 md:px-2 pb-2 md:pb-0 flex flex-col md:justify-center",children:[a&&(0,r.jsx)(h.Z,{variant:"caption",className:"font-bold",component:"span",children:t("details")}),(0,r.jsx)(h.Z,{variant:"body2",children:"pt"===s?e.details:t("protocolItems.".concat(e.type,".").concat("NO_ALERT"===e.status?"unlockedDetails":"lockedDetails"))+"".concat("NO_ALERT"!==e.status?'\nOriginal Details: "'.concat(e.details,'"'):"")})]})]})},e.type)),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between py-3 px-4",children:[(0,r.jsxs)(h.Z,{variant:"body2",className:"mr-2",children:[t("lastUpdate"),":"]}),(0,r.jsxs)("span",{className:"flex flex-row items-center",children:[(0,r.jsx)(b.I,{icon:"mdi:clock-outline",className:"mr-[3px] mb-[1px]",width:15}),(0,r.jsx)(h.Z,{variant:"body2",children:function(e){let t=new Date(e);if(isNaN(t.getDate()))return"";let s=(0,g.Bu)(t.getDate()),r=(0,g.Bu)(t.getMonth()+1),a=t.getFullYear(),l=(0,g.Bu)(t.getHours()),n=(0,g.Bu)(t.getMinutes()),o=(0,g.Bu)(t.getSeconds());return"".concat(s,"/").concat(r,"/").concat(a," ").concat(l,":").concat(n,":").concat(o)}(o)})]})]})]})}var es=s(77744);function er(e){let{className:t}=e;return(0,r.jsx)("div",{className:"h-[200px] flex flex-row items-center justify-center py-4 ".concat(null!=t?t:""),children:(0,r.jsx)(b.I,{icon:"svg-spinners:ring-resize",width:40,className:"text-primary"})})}var ea=s(42175),el=s.n(ea),en=s(64429),eo=s.n(en);function ei(e){let t=(0,c.useTranslations)("reportPage.labels.geolocationPanel"),{area:s,center:l,city:n,farmId:o,state:i}=e,[d,x]=(0,a.useState)(!1);return(0,r.jsx)(es.Jx,{clickable:!0,position:l,title:t("title"),onClick:()=>{x(!0)},children:d&&(0,r.jsx)(es.nx,{position:l,onCloseClick:()=>{x(!1)},children:(0,r.jsxs)("article",{className:"py-2 px-1 ".concat(el().className),children:[(0,r.jsxs)("div",{className:"mb-1 break-words",children:[(0,r.jsxs)("span",{className:"font-bold",children:[t("farmId"),": "]}),o]}),(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsxs)("span",{className:"font-bold",children:[t("city"),": "]}),(0,r.jsx)("span",{children:n})]}),(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsxs)("span",{className:"font-bold",children:[t("state"),": "]}),i]}),(0,r.jsxs)("div",{className:"text-blue",children:[(0,r.jsxs)("span",{className:"font-bold",children:[t("area"),": "]}),s]}),(0,r.jsxs)("div",{className:"mt-2 text-blue-600 flex flex-row items-center",children:[(0,r.jsx)(b.I,{icon:"mdi:map",width:15,className:"mr-1"}),(0,r.jsx)("a",{target:"_blank",className:eo().className,href:"https://google.com/maps/place/".concat(l.lat,",").concat(l.lng),children:t("viewOnMaps")})]})]})})})}var ec=s(4984),ed=s(20357);function ex(e){return"number"==typeof e[0]?{lat:e[1],lng:e[0]}:e.map(e=>({lat:e[1],lng:e[0]}))}function eu(e){let t=Math.floor(e.length/2);return e.sort((e,t)=>e-t),e[t]}function ep(e){var t;let{coordinates:s,mapRef:a}=e,l=(0,c.useTranslations)("reportPage.labels.geolocationPanel"),n=(0,c.useLocale)(),{isLoaded:o}=(0,es.Ji)({id:"google-map-script",googleMapsApiKey:null!==(t=ed.env.NEXT_PUBLIC_MAPS_API_KEY)&&void 0!==t?t:"",version:"3.55",language:n});if(0===s.length)return(0,r.jsx)(ec.A,{type:"error",children:l("geolocationNotFound")});let i=ex(s),d=ex(function(e){let t=e.map(e=>e[0]),s=e.map(e=>e[1]);return[eu(t),eu(s)]}(s)),x=o&&(0,r.jsx)("div",{ref:a,children:(0,r.jsx)(es.b6,{id:"map",mapContainerStyle:{width:"100%",minHeight:"75vh"},center:d,onCenterChanged:()=>{},zoom:13,mapTypeId:"hybrid",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(es.mg,{path:i,options:{fillColor:"gray",strokeColor:"white",strokeWeight:1}}),(0,r.jsx)(ei,{center:d,...e})]})})});return null!=x?x:(0,r.jsx)(er,{})}function em(e){let t=(0,c.useTranslations)("reportPage.labels.geolocationPanel"),{id:s,farmId:a,city:l,state:n,area:o}=e;return(0,r.jsxs)(x.Z,{component:"section",id:s,children:[(0,r.jsxs)(m.ZP,{container:!0,component:"article",children:[(0,r.jsxs)(m.ZP,{item:!0,xs:8,md:5,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("farmId")}),(0,r.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3 break-all pr-3",children:a})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:4,md:2,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("area")}),(0,r.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:o})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:8,md:3,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("city")}),(0,r.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:l})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:4,md:2,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 block border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",component:"span",children:t("state")}),(0,r.jsx)(h.Z,{variant:"body2",className:"pl-2 py-3",children:n})]})]}),(0,r.jsx)(ep,{...e})]})}function eh(e){let[t,s]=(0,a.useState)(0),l=(0,c.useTranslations)("reportPage.labels.suppliersList"),{supplierData:n,mapRef:o}=e,[i,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(null),m=(0,a.useMemo)(()=>(0,r.jsx)(et,{id:"report-".concat(encodeURI(n.farmId+n.supplierName)),lastUpdate:n.lastUpdate,protocolData:n.protocol}),[n.farmId,n.supplierName,n.lastUpdate,n.protocol]),h=(0,a.useMemo)(()=>(0,r.jsx)(em,{id:"geolocation-".concat(encodeURI(n.farmId+n.supplierName)),farmId:n.farmId,city:n.city,state:n.state,area:n.area,coordinates:n.coordinates,mapRef:o}),[n.farmId,n.supplierName,n.city,n.state,n.area,n.coordinates,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)($.Z,{component:"nav",value:t,onChange:(e,t)=>s(t),variant:"fullWidth",sx:{".MuiTabs-scroller":{height:42}},children:[(0,r.jsx)(Q.Z,{label:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(b.I,{icon:"mingcute:leaf-fill",width:18,className:"pr-1"}),l("deforestationReports")]}),className:"py-0"}),(0,r.jsx)(Q.Z,{label:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(b.I,{icon:"ph:map-pin-fill",width:18,className:"pr-1"}),l("geolocation")]}),className:"py-0 min-h-0"})]}),(0,r.jsx)(ee,{index:0,value:t,children:m}),(0,r.jsx)(ee,{index:1,value:t,children:h})]}),(0,r.jsxs)("div",{className:"flex flex-row justify-end mt-4 gap-3",children:[(0,r.jsxs)(V.Z,{variant:"contained",color:"buttonWhite",onClick:e=>{d(e.currentTarget)},children:[(0,r.jsx)(b.I,{icon:"mdi:download",width:18,className:"mr-2"}),l("exportReports")]}),(0,r.jsx)(K,{data:n,formats:{excel:!0,geoJson:!1,kml:!1,jpg:!1},selectedExportOption:i,setSelectedExportOption:d}),(0,r.jsxs)(V.Z,{variant:"contained",color:"buttonWhite",onClick:e=>{p(e.currentTarget)},children:[(0,r.jsx)(b.I,{icon:"mdi:download",width:18,className:"mr-2"}),l("exportCoordinates")]}),(0,r.jsx)(K,{data:n,formats:{excel:!1,geoJson:!0,kml:!0,jpg:!0},mapRef:o,selectedExportOption:u,setSelectedExportOption:p})]})]})}function ef(e){let t=e.supplierData,[s,l]=(0,a.useState)(!1),n=(0,c.useTranslations)("reportPage.labels"),o=(0,g.BX)(t),i=(0,a.useRef)(null);return(0,r.jsx)(q.w,{component:"article",panel:(0,r.jsx)(eh,{supplierData:t,mapRef:i}),isOpen:s,setPanelState:l,children:(0,r.jsxs)(m.ZP,{container:!0,children:[(0,r.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(u.Z,{title:n("suppliersList.".concat("NO_ALERT"===o?"statusUnlocked":"statusLocked")),children:(0,r.jsx)("span",{children:(0,r.jsx)(b.I,{icon:"NO_ALERT"===o?"ph:seal-check-fill":"ph:seal-warning-fill",className:"NO_ALERT"===o?"text-emerald-600":"text-red-600",width:22,"aria-label":n("suppliersList.".concat("NO_ALERT"===o?"statusUnlocked":"statusLocked"))})})})}),(0,r.jsx)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",children:t.supplierName})}),(0,r.jsx)(m.ZP,{item:!0,xs:5,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"break-words",children:t.farmId})}),(0,r.jsx)(m.ZP,{item:!0,xs:1,className:"px-2 flex flex-col justify-center items-end",children:(0,r.jsx)(b.I,{icon:"mdi:chevron-down",width:30,className:"text-neutral-600 ".concat(s?"rotate-180":"rotate-0")})})]})},"".concat(t.supplierName,"-").concat(t.farmId))}function eb(){let e=(0,c.useTranslations)("reportPage.labels"),t=(0,d.Z)(j.r.breakpoints.down("lg")),s=P(),[l,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=(t,s)=>"HIGH"===t.status&&"HIGH"!==s.status?-1:"HIGH"===s.status&&"HIGH"!==t.status?1:t.status===s.status?e("reportsPanel.protocolItems.".concat(t.type,".name")).localeCompare(e("reportsPanel.protocolItems.".concat(s.type,".name"))):0;s&&(s.suppliers.forEach(e=>e.protocol.sort(t)),s.suppliers.sort((e,t)=>"HIGH"===(0,g.BX)(e)&&"HIGH"!==(0,g.BX)(t)?-1:"HIGH"===(0,g.BX)(t)&&"HIGH"!==(0,g.BX)(e)?1:(0,g.BX)(e)===(0,g.BX)(t)?e.supplierName.localeCompare(t.supplierName):0))},[s,e]),(0,r.jsx)("section",{id:"suppliers-list",className:"p-4 flex flex-col items-center",children:(0,r.jsxs)(x.Z,{className:"max-w-[1200px] w-full",children:[(0,r.jsx)(y.O,{icon:(0,r.jsx)(b.I,{icon:"ic:round-agriculture",width:31,className:"mr-3"}),title:e("suppliersList.title"),actions:s&&(0,r.jsx)(u.Z,{title:e("suppliersList.exportAllSuppliers"),children:(0,r.jsx)(p.Z,{onClick:e=>{n(e.currentTarget)},className:"px-0 py-1",children:(0,r.jsx)(b.I,{icon:"mdi:download",className:"text-white"})})})}),s&&(0,r.jsx)(K,{title:e("suppliersList.exportAllSuppliers"),data:s,selectedExportOption:l,setSelectedExportOption:n,formats:{excel:!0,geoJson:!0,kml:!0,jpg:!1}}),(0,r.jsxs)(N.Y,{children:[(0,r.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.status")})}),(0,r.jsx)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.supplierName")})}),(0,r.jsx)(m.ZP,{item:!0,xs:5,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold break-words hyphens-auto",children:e("suppliersList.farmId")})})]}),s&&s.suppliers.length>0&&s.suppliers.map(e=>(0,r.jsx)(ef,{supplierData:e},"".concat(e.supplierName,"-").concat(e.farmId))),void 0===s&&(0,r.jsx)("article",{id:"suppliers-loading",className:"py-2",children:(0,r.jsxs)(m.ZP,{container:!0,children:[(0,r.jsx)(m.ZP,{item:!0,xs:2,md:1,className:"px-2 flex flex-col justify-center",children:(0,r.jsx)(f.Z,{width:25})}),(0,r.jsxs)(m.ZP,{item:!0,xs:4,md:5,className:"px-2 flex flex-col justify-center",children:[(0,r.jsx)(f.Z,{width:t?"90%":"80%"}),(0,r.jsx)(f.Z,{width:"60%"})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:6,className:"px-2 flex flex-col justify-center",children:[(0,r.jsx)(f.Z,{width:t?"60%":"50%"}),(0,r.jsx)(f.Z,{width:t?"90%":"70%"})]})]})}),null===s&&(0,r.jsx)(ec.A,{id:"suppliers-error",type:"error",children:e("suppliersList.noSuppliersError")})]})})}var ej=s(75462);function eg(e){let{id:t,children:s,width:a,height:l}=e;return(0,r.jsx)("div",{id:t,className:"pl-2 py-3",children:s||(0,r.jsx)(f.Z,{width:null!=a?a:80,height:null!=l?l:20})})}function ey(){let e=(0,c.useTranslations)("reportPage.labels.orderDetails"),t=P(),s=t&&t.suppliers.filter(e=>e.protocol.filter(e=>"NO_ALERT"!==e.status).length>0).length>0?"HIGH":"NO_ALERT",a=t&&void 0!==t.customerName,l=t&&void 0!==t.countryCode?t.countryCode:"";return(0,r.jsx)("section",{id:"order-details",className:"p-4 flex flex-col items-center",children:(0,r.jsxs)(x.Z,{className:"max-w-[1200px] w-full",children:[(0,r.jsx)(y.O,{title:e("title"),icon:(0,r.jsx)(b.I,{icon:"material-symbols:order-approve",width:28,className:"mr-3"})}),(t||void 0===t)&&(0,r.jsxs)(m.ZP,{container:!0,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("orderNumber")}),(0,r.jsx)(eg,{width:100,children:t?(0,r.jsx)(h.Z,{variant:"body2",children:t.orderNumber}):void 0})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("date")}),(0,r.jsx)(eg,{width:80,children:t?(0,r.jsx)(h.Z,{variant:"body2",children:(0,g.p6)(t.orderDate)}):void 0})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:2,md:2,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-b-[1px] border-x-0 border-t-0 border-solid border-neutral-200",children:e("volume")}),(0,r.jsx)(eg,{width:70,children:t?(0,r.jsx)(h.Z,{variant:"body2",children:t.volume}):void 0})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:5,md:3,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 xs:border-t-[1px] md:border-t-0",children:e("supplierNumber")}),(0,r.jsx)(eg,{width:50,children:t?(0,r.jsx)(h.Z,{variant:"body2",children:t.suppliers.length}):void 0})]}),(0,r.jsxs)(m.ZP,{item:!0,xs:a?5:7,md:1,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 xs:border-t-[1px] md:border-t-0",children:e("status")}),(0,r.jsx)(eg,{width:25,children:t?(0,r.jsx)(u.Z,{title:e("NO_ALERT"===s?"statusUnlocked":"statusLocked"),"aria-label":e("NO_ALERT"===s?"statusUnlocked":"statusLocked"),children:(0,r.jsx)("span",{children:(0,r.jsx)(b.I,{icon:"NO_ALERT"===s?"ph:seal-check-fill":"ph:seal-warning-fill",className:"\n                        ".concat("NO_ALERT"===s?"text-emerald-600":"text-red-600"),width:22})})}):void 0})]}),a&&(0,r.jsxs)(m.ZP,{item:!0,xs:2,md:3,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 border-t-[1px]",children:e("country")}),(0,r.jsx)(eg,{width:100,children:t?""!==l?(0,r.jsx)(ej.Z,{className:" w-6 h-6 border border-solid border-neutral-300 bg-neutral-300",children:(0,r.jsx)(b.I,{icon:"circle-flags:".concat(l),width:25})}):(0,r.jsx)(ej.Z,{className:" w-6 h-6 border border-solid border-neutral-400 bg-transparent text-neutral-400",children:(0,r.jsx)(b.I,{icon:"mdi:question-mark",width:22})}):void 0})]}),a&&(0,r.jsxs)(m.ZP,{item:!0,xs:12,md:9,children:[(0,r.jsx)(h.Z,{variant:"body2",className:"font-bold bg-stone-100 pl-2 py-1 border-solid border-neutral-200 border-b-[1px] border-x-0 border-t-[1px]",children:e("customerName")}),(0,r.jsx)(eg,{width:100,children:t?(0,r.jsx)(h.Z,{variant:"body2",children:t.customerName}):void 0})]})]}),null===t&&(0,r.jsx)(ec.A,{id:"report-error",type:"error",children:e("noOrderDetailsError")})]})})}var eN=s(86504);function ew(e){let t=(0,l.useRouter)(),s=(0,l.useParams)().lang,a=(0,c.useTranslations)("reportPage.labels.navbar"),{titleAppend:n,className:o}=e;return(0,r.jsx)(eN.w,{className:o,titleAppend:n,i18n:a,onBackButton:()=>t.replace("/".concat(s,"/orders"))})}var ev=s(37988),ek=s(89657);function eZ(){let e=(0,l.useRouter)(),t=(0,l.useParams)().lang,s=(0,ek.T)(),a=P();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ew,{className:"flex lg:hidden",titleAppend:a?a.orderNumber:void 0}),(0,r.jsxs)("div",{className:"flex flex-row grow",children:[(0,r.jsx)(ev.I,{card:!0,className:"hidden lg:flex h-screen",customerId:s?s.customerId:void 0,customerName:s?s.customerName:void 0,onHomeButton:()=>{s&&"admin"===s.role?e.replace("/".concat(t,"/dashboard")):e.replace("/".concat(t,"/orders"))},logo:s?s.logo:void 0,hideSettings:!0,hideLogout:!0,showOrders:!!s&&"admin"===s.role}),(0,r.jsxs)("main",{className:"flex flex-col grow",children:[(0,r.jsx)(ew,{className:"hidden lg:flex",titleAppend:a?a.orderNumber:void 0}),(0,r.jsx)(i.ZP,{universal:!0,children:(0,r.jsxs)("div",{className:"flex flex-col grow px-4 lg:px-8 justify-between min-h-full",children:[(0,r.jsxs)("div",{className:"grow",children:[(0,r.jsx)(ey,{}),(0,r.jsx)(eb,{})]}),(0,r.jsx)(o.m,{className:"mt-4 mb-2"})]})})]})]})]})}function eP(){let e=(0,l.useSearchParams)().get("oid"),t=(0,w.L)(),[s,o]=(0,a.useState)((0,r.jsx)(n.LoadingScreen,{}));return(0,a.useEffect)(()=>{t&&e&&o((0,r.jsx)(a.Suspense,{children:(0,r.jsx)(ek.i,{children:(0,r.jsx)(Z,{children:(0,r.jsx)(eZ,{})})})}))},[t,e]),s}},63807:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(57437);function a(e){let{title:t,icon:s,actions:a,className:l}=e;return(0,r.jsxs)("div",{className:"flex flex-row px-4 py-1.5 items-center\n      bg-stone-800 text-gray-50 ".concat(null!=l?l:""),children:[s,(0,r.jsx)("h3",{className:"text-xl m-0 font-medium",children:t}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grow"}),a]})]})}},75268:function(e,t,s){"use strict";s.d(t,{w:function(){return l}});var r=s(57437),a=s(87138);function l(e){let t="component"in e&&e.component?e.component:"div",s="panel"in e,l="href"in e,{id:n,children:o}=e,i="py-2 flex flex-row border-neutral-200 border-b-[1px]\n	border-t-0 border-x-0 border-solid ";return(s||l)&&(i+="hover:cursor-pointer hover:bg-stone-100 "),l&&(i+="text-inherit no-underline"),(0,r.jsxs)(t,{id:n,children:[l&&(0,r.jsx)(a.default,{href:e.href,className:i,children:o}),!l&&(0,r.jsx)("div",{onClick:()=>{s&&e.setPanelState(e=>!e)},className:i,children:o}),s&&!0===e.isOpen&&(0,r.jsx)("div",{className:"p-4 bg-[#abada3]",children:e.panel})]})}},99926:function(e,t,s){"use strict";s.d(t,{Y:function(){return l}});var r=s(57437),a=s(58433);function l(e){let{children:t}=e;return(0,r.jsx)(a.ZP,{container:!0,className:"py-1 bg-neutral-100 border-neutral-200 border-b-[1px] border-t-0 border-x-0 border-solid",children:t})}},78659:function(e,t,s){"use strict";s.d(t,{LoadingScreen:function(){return d}});var r=s(57437),a=s(66648),l=s(69129),n=s(73244),o=s(16463),i=s(1633),c=s(18087);function d(e){let t=(0,o.useRouter)(),s=(0,o.useParams)().lang,d=(0,c.useTranslations)("loadingScreen.labels"),{id:x}=e;return(0,r.jsxs)("section",{id:x,className:"bg-white min-h-[100vh] flex flex-col items-center justify-center",children:[(0,r.jsx)(a.default,{width:100,height:65,src:"/logo.svg",alt:"Logo",className:"mb-10 w-auto h-[100px]",priority:!0}),(0,r.jsx)(l.I,{icon:"svg-spinners:3-dots-fade",width:40,className:"text-tertiary"}),(0,r.jsxs)("p",{className:"text-sm absolute bottom-3 animate-fade animate-delay-1000",children:["".concat(d("notRedirected")," "),(0,r.jsx)("a",{href:"".concat(i.X8,"/").concat(s,"/"),className:"underline text-primary",onClick:e=>{e.preventDefault(),t.replace("/".concat(n.E.defaultLocale))},children:d("clickHere")})," ".concat(d("goToFrontPage"))]})]})}},86504:function(e,t,s){"use strict";s.d(t,{w:function(){return c}});var r=s(57437),a=s(66648),l=s(16463),n=s(70270),o=s(60335),i=s(69129);function c(e){let t=(0,l.useRouter)(),s=e.drawer&&e.setDrawerOpen,{i18n:c,titleAppend:d,onBackButton:x,className:u}=e;return(0,r.jsxs)(n.Z,{component:"header",className:"pr-6 py-3 flex items-center rounded-none\n      justify-between z-10 h-9 text-foreground \n      ".concat(s||x?"pl-4":"pl-8","\n      ").concat(null!=u?u:""),children:[(s||x)&&(0,r.jsx)(o.Z,{className:"mr-3 text-foreground animate-fade animate-duration-500","aria-label":c(s?"menu":"goBack"),onClick:()=>{s&&e.setDrawerOpen?e.setDrawerOpen(e=>!e):x?x():t.back()},children:(0,r.jsx)(i.I,{icon:s?"mdi:menu":"mdi:arrow-back",width:23})}),e.drawer,(0,r.jsx)("div",{className:"text-xl font-medium grow animate-fade animate-duration-500 animate-delay-150",children:(0,r.jsx)("span",{children:c("title")+(d?" - ".concat(d):"")})}),(0,r.jsx)(a.default,{width:66,height:43,src:"/logo.svg",alt:"Logo",className:"inline w-auto h-[30px]",priority:!0})]})}},37988:function(e,t,s){"use strict";s.d(t,{I:function(){return p}});var r=s(57437),a=s(66648),l=s(16463),n=s(18087),o=s(57300),i=s(75462),c=s(70270),d=s(69129),x=s(52179);function u(e){let{logo:t,customerId:s,customerName:c,onHomeButton:u,hideSettings:p,hideLogout:m,showOrders:h}=e,f=(0,n.useTranslations)("ordersPage.labels.drawer"),b=(0,l.useRouter)(),j=(0,l.useParams)().lang,g=[];return u&&g.push((0,r.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:u,children:[(0,r.jsx)(d.I,{icon:"mdi:home-outline",width:22,className:"mr-2"}),f("home")]})),h&&g.push((0,r.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>b.push("/".concat(j,"/orders")),children:[(0,r.jsx)(d.I,{icon:"mingcute:ship-line",width:22,className:"mr-2"}),f("orders")]})),p||g.push((0,r.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>b.push("/".concat(j,"/settings")),children:[(0,r.jsx)(d.I,{icon:"mdi:account-cog-outline",width:22,className:"mr-2"}),f("accountSettings")]})),m||g.push((0,r.jsxs)(o.Z,{className:"py-4 px-6 flex flex-row justify-center",onClick:()=>{localStorage.removeItem("eudr_auth_token"),sessionStorage.removeItem("eudr_auth_token"),b.replace("/".concat(j))},children:[(0,r.jsx)(d.I,{icon:"ic:exit-to-app",width:20,className:"mr-2"}),f("logout")]})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center pt-7 pb-6 justify-center relative bg-primary",children:[(0,r.jsx)(a.default,{src:"/cafe-grao.jpg",alt:f("coffeeBeans"),sizes:"350px",className:"object-cover",fill:!0,priority:!0}),(0,r.jsx)("div",{className:"bg-yellow-900/25 w-full h-full absolute top-0 left-0"}),(0,r.jsx)("div",{className:"bg-black/25 w-full h-full absolute top-0 left-0"}),(0,r.jsx)(i.Z,{className:"h-[100px] w-[100px] border-1 border-solid shadow-sm border-white",children:(0,r.jsx)(a.default,{src:null!=t?t:"/user.webp",alt:f("customerLogo"),width:100,height:100})}),c&&(0,r.jsx)("span",{className:"text-2xl text-center pt-4 drop-shadow-sm text-white",children:c})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-between grow",children:[(0,r.jsx)("nav",{className:"flex flex-col justify-center mt-4",children:g.map((e,t)=>(0,r.jsx)("div",{className:"animate-duration-300 ".concat(t%2==0?"animate-fade-left":"animate-fade-right"),children:e},"user-profile-item-".concat(t)))}),(0,r.jsx)("div",{className:"px-4 pb-4 flex flex-row justify-center mt-4",children:(0,r.jsx)(x.$,{})})]})]})}function p(e){let{card:t,className:s,...a}=e,l=(0,r.jsx)(u,{...a}),n="w-[320px] h-full flex flex-col py-0 ".concat(null!=s?s:"");return t?(0,r.jsx)(c.Z,{className:"rounded-none ".concat(n),children:l}):(0,r.jsx)("div",{className:n,children:l})}},70773:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var r=s(42175),a=s.n(r);let l=(0,s(94444).Z)({typography:{fontFamily:a().style.fontFamily},components:{MuiListItemButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiIconButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiButton:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}},MuiMenuItem:{styleOverrides:{root:{"&& .MuiTouchRipple-child":{backgroundColor:"#c9b69f"}}}}},palette:{primary:{main:"#74533b",light:"#74533b",dark:"#74533b",contrastText:"#fff"},secondary:{main:"#e3d5cc",light:"#e3d5cc",dark:"#e3d5cc",contrastText:"#1d1b19"},tertiary:{main:"#A0BF7F",light:"#A0BF7F",dark:"#A0BF7F",contrastText:"#fff"},buttonWhite:{main:"#ffffff",light:"#ffffff",dark:"#ffffff",contrastText:"#1d1b19"},success:{main:"#159847",light:"#159847",dark:"#159847",contrastText:"#159847"},error:{main:"#dc2626",light:"#dc2626",dark:"#dc2626",contrastText:"#dc2626"}}})},89657:function(e,t,s){"use strict";s.d(t,{T:function(){return c},i:function(){return i}});var r=s(57437),a=s(2265),l=s(49716),n=s(7824);let o=(0,a.createContext)(void 0);function i(e){let{children:t}=e,s=function(e){let[t,s]=(0,a.useState)();return(0,a.useEffect)(()=>{e?s(n.u):s(null)},[e,s]),t}((0,l.L)());return(0,r.jsx)(o.Provider,{value:s,children:t})}let c=()=>(0,a.useContext)(o)}},function(e){e.O(0,[839,113,910,816,617,87,37,614,439,487,119,319,61,159,971,23,744],function(){return e(e.s=397)}),_N_E=e.O()}]);